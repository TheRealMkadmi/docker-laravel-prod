#!/bin/bash
set -e

# Enhanced health check script that checks Octane service and reports configuration
# Checks if Laravel Octane (port 8000) is responding

# Log health check information
echo "Health check: Checking Octane (workers=${OCTANE_WORKERS}, task-workers=${OCTANE_TASK_WORKERS})"

# Check if Octane is responding on port 8000
if curl -s -f -o /dev/null http://localhost:8000/; then
  echo "Health check: Octane is healthy"
  exit 0
else
  echo "Health check: Octane is not responding"
  exit 1
fi